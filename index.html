<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Crypto Wallet</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js" type="application/javascript"></script>
    
    <style>
        :root {
            --tg-bg: var(--tg-theme-bg-color, #18222d);
            --tg-text: var(--tg-theme-text-color, #ffffff);
            --tg-hint: var(--tg-theme-hint-color, #707579);
            --tg-secondary-bg: var(--tg-theme-secondary-bg-color, #232e3c);
            --green: #27ae60;
            --red: #c0392b;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            padding: 15px; margin: 0; background-color: var(--tg-bg); color: var(--tg-text);
        }
        .wallet-header { text-align: center; margin-bottom: 25px; }
        .balance-total { font-size: 36px; font-weight: 600; }
        .balance-hint { color: var(--tg-hint); font-size: 14px; }
        .actions-bar { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 30px; text-align: center; }
        .action-button { display: flex; flex-direction: column; align-items: center; font-size: 14px; cursor: pointer; }
        .action-icon { width: 48px; height: 48px; background-color: var(--tg-secondary-bg); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; margin-bottom: 5px; }
        
        /* –°—Ç–∏–ª—ñ –∞–∫—Ç–∏–≤—ñ–≤ */
        .asset-list-title { font-weight: 600; margin-bottom: 10px; }
        .asset-item { display: flex; align-items: center; padding: 10px 0; border-bottom: 1px solid var(--tg-secondary-bg); }
        .asset-item:last-child { border-bottom: none; }
        .asset-icon { width: 40px; height: 40px; margin-right: 12px; }
        .asset-info { flex-grow: 1; }
        .asset-name { font-weight: 500; }
        .asset-balance-crypto { color: var(--tg-hint); font-size: 14px; }
        .asset-value { text-align: right; }
        .asset-balance-usd { font-weight: 500; }
        .asset-price-change { font-size: 14px; }
        .positive { color: var(--green); }
        .negative { color: var(--red); }
        
        /* –ù–û–í–Ü –°–¢–ò–õ–Ü –¥–ª—è —ñ—Å—Ç–æ—Ä—ñ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π */
        .history-title { font-weight: 600; margin-top: 30px; margin-bottom: 10px; }
        .history-item { display: flex; align-items: center; padding: 12px 0; }
        .history-icon { width: 40px; height: 40px; margin-right: 12px; background-color: var(--tg-secondary-bg); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .history-details { flex-grow: 1; }
        .history-type { font-weight: 500; }
        .history-date { color: var(--tg-hint); font-size: 14px; }
        .history-amount { text-align: right; }
        .history-amount-crypto { font-weight: 500; }
        .history-amount-usd { color: var(--tg-hint); font-size: 14px; }
        .received { color: var(--green); }
        .sent { color: var(--tg-text); } /* –ö–æ–ª—ñ—Ä –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏—Ö */
    </style>
</head>
<body>
    <div class="wallet-header">
        <div id="total-balance-usd" class="balance-total">$0.00</div>
        <div class="balance-hint">–ó–∞–≥–∞–ª—å–Ω–∏–π –±–∞–ª–∞–Ω—Å –≤ USD</div>
    </div>
    <div class="actions-bar">
        <div class="action-button" onclick="showAlert('–ü–æ–ø–æ–≤–Ω–∏—Ç–∏')"><div class="action-icon">‚ûï</div><span>–ü–æ–ø–æ–≤–Ω–∏—Ç–∏</span></div>
        <div class="action-button" onclick="showAlert('–í–∏–≤–µ—Å—Ç–∏')"><div class="action-icon">‚¨ÜÔ∏è</div><span>–í–∏–≤–µ—Å—Ç–∏</span></div>
        <div class="action-button" onclick="showAlert('–û–±–º—ñ–Ω—è—Ç–∏')"><div class="action-icon">üîÑ</div><span>–û–±–º—ñ–Ω—è—Ç–∏</span></div>
        <div class="action-button" onclick="showAlert('–ë—ñ—Ä–∂–∞')"><div class="action-icon">üìà</div><span>–ë—ñ—Ä–∂–∞</span></div>
    </div>
    <div class="asset-list-title">–ê–∫—Ç–∏–≤–∏</div>
    <div id="asset-list"></div>

    <div class="history-title">–Ü—Å—Ç–æ—Ä—ñ—è</div>
    <div id="transaction-history-list"></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();

        function showAlert(action) {
            tg.showAlert(`–§—É–Ω–∫—Ü—ñ—è "${action}" –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ.`);
        }

        const myAssets = [
            { id: 'ethereum', symbol: 'ETH', name: 'Ethereum', balance: 0.05, iconUrl: 'https://s2.coinmarketcap.com/static/img/coins/64x64/1027.png' },
            { id: 'tether', symbol: 'USDT', name: 'Tether', balance: 100.50, iconUrl: 'https://s2.coinmarketcap.com/static/img/coins/64x64/825.png' },
            { id: 'the-open-network', symbol: 'TON', name: 'Toncoin', balance: 25.0, iconUrl: 'https://s2.coinmarketcap.com/static/img/coins/64x64/11419.png' }
        ];

        // –ù–û–í–ò–ô –ú–ê–°–ò–í –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
        const mockTransactions = [
            { type: 'received', assetSymbol: 'TON', amountCrypto: 28.57, amountUsd: 100, date: '01 —Å–µ—Ä–ø–Ω—è 2025' },
            { type: 'sent', assetSymbol: 'ETH', amountCrypto: 0.02, amountUsd: 68.4, date: '30 –ª–∏–ø–Ω—è 2025' },
            { type: 'received', assetSymbol: 'USDT', amountCrypto: 50.0, amountUsd: 50.0, date: '28 –ª–∏–ø–Ω—è 2025' },
            { type: 'sent', assetSymbol: 'TON', amountCrypto: 5.0, amountUsd: 17.5, date: '25 –ª–∏–ø–Ω—è 2025' },
        ];

        async function fetchAssetPrices() {
            // ... (—Ü–µ–π –∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω)
        }

        async function displayAssets() {
            // ... (—Ü–µ–π –∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω)
        }

        // –ù–û–í–ê –§–£–ù–ö–¶–Ü–Ø –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó
        function displayTransactionHistory() {
            const historyListElement = document.getElementById('transaction-history-list');
            let html = '';

            for (const tx of mockTransactions) {
                const isReceived = tx.type === 'received';
                const sign = isReceived ? '+' : '-';
                const amountClass = isReceived ? 'received' : 'sent';
                const icon = isReceived ? '‚ûï' : '‚¨ÜÔ∏è';
                
                const asset = myAssets.find(a => a.symbol === tx.assetSymbol);

                html += `
                    <div class="history-item">
                        <div class="history-icon">${icon}</div>
                        <div class="history-details">
                            <div class="history-type">${isReceived ? '–û—Ç—Ä–∏–º–∞–Ω–æ' : '–ù–∞–¥—ñ—Å–ª–∞–Ω–æ'} ${asset.name}</div>
                            <div class="history-date">${tx.date}</div>
                        </div>
                        <div class="history-amount">
                            <div class="history-amount-crypto ${amountClass}">${sign}${tx.amountCrypto.toFixed(4)} ${tx.assetSymbol}</div>
                            <div class="history-amount-usd">$${tx.amountUsd.toFixed(2)}</div>
                        </div>
                    </div>
                `;
            }
            historyListElement.innerHTML = html;
        }

        // –û–ù–û–í–õ–ï–ù–û: –≤–∏–∫–ª–∏–∫–∞—î–º–æ –æ–±–∏–¥–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.addEventListener('load', () => {
            displayAssets();
            displayTransactionHistory();
        });
    </script>
</body>
</html>